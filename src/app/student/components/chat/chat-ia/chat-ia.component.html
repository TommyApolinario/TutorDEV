<body>
    <div class="row mb-3">
        <div class="title-module mt-3 mx-lg-1">
            <h4 id="titulo"><fa-icon [icon]="iconChatIA" class="icon-title"></fa-icon> Chat con IA</h4>
        </div>
    </div>

    <div class="chat-container">
        <div class="message received">
            <div class="content mt-2">
                <img src="../../../../../assets/chat-bot-profile.svg" alt="Avatar_chatBot" class="avatar">
            </div>
            <p class="typing-animation mb-0">Â¡Hola!, soy tu asistente virtual, Â¿en quÃ© puedo ayudarte? ğŸ™‚</p>
        </div>
        
        @for(message of arrayMessages; track $index){
            @if(message.sender === 'IA'){
                @if(message.content == "Escribiendo"){
                    <div class="message received">
                        <div class="mx-3 spinner-border text-secondary" role="status">
                            <span class="visually-hidden">Loading...</span>
                            </div>
                    </div>
                }
                @else {
                    <div class="message received">
                        <div class="content">
                            <img src="../../../../../assets/chat-bot-profile.svg" alt="Avatar_chatBot" class="avatar">
                        </div>
                        <p class="typing-animation mb-0" style="white-space: pre-line">{{message.content }}</p>
                    </div>
                }
            }
            @else {
                <div class="message sent">
                    <p class="mb-0"> {{message.content}} </p>
                    <img [src]="urlUserProfileImg" alt="Avatar_user" class="avatar">
                </div>
            }
        }
    </div>

    <div class="row mt-2">
        <form class="input-container mb-2" [formGroup]="inputForm" (ngSubmit)="sendMessage()">
            <input type="text" class="form-control form-control-lg bg-light fs-6" formControlName="request" placeholder="Escribe un mensaje...">
            <button type="submit"><fa-icon [icon]="iconSend"></fa-icon></button>
        </form>
    </div>
</body>